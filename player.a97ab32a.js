(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["player"],{"05f8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"fragment"},[s("window",{class:e.isPlaying?"now-playing":"",attrs:{id:"window-"+e.id,lock:e.showWatchAd||e.showOpenDialog}},[s("title-bar",{attrs:{icon:e.id,title:e.$t(e.id)}},[s("controls")],1),s("address-bar",{attrs:{hideSearch:""}},[s("navigation"),s("div",{staticClass:"addr"},[s("label",[e._v(e._s(e.$t("library")))]),s("label",[e._v(e._s(e.library))])])],1),s("tool-bar",{attrs:{items:e.toolbar}}),s("div",{staticClass:"container"},[s("div",{attrs:{id:"player-list"}},[e.isLoading?s("div",{staticClass:"noitem italic text-gray-500"},[e._v(" "+e._s(e.$t("wait"))+" ")]):[e.showList?e._e():s("div",{staticClass:"noitem"},[e._v(" "+e._s(e.$t("no-items-library"))+" "),s("br"),e._v(e._s(e.$t("click-organize"))+" ")]),e.showList?s("play-list",{attrs:{files:e.list,index:e.current},on:{play:e.play}}):e._e(),s("google-ads",{attrs:{infeed:""}})]],2),s("audio",{ref:"music",attrs:{hidden:""},on:{ended:function(t){e.current=e.current===e.list.length-1?0:e.current+1},timeupdate:function(e){return t.currentTime=e.target.currentTime},loadedmetadata:function(e){return t.duration=e.target.duration}}}),s("video",{ref:"videos",staticClass:"player-overlay",on:{ended:function(t){e.current=e.current===e.list.length-1?0:e.current+1},timeupdate:function(e){return t.currentTime=e.target.currentTime},loadedmetadata:function(e){return t.duration=e.target.duration}}}),s("img",{ref:"pictures",staticClass:"player-overlay"})]),s("div",{staticClass:"footer"},[s("input",{style:e.progressStyle,attrs:{id:"player-progress",type:"range",max:Math.round(e.duration)},domProps:{value:e.currentTime},on:{input:e.progress}}),s("div",{attrs:{id:"player-info"}},[s("ul",{attrs:{id:"player-controls"}},[s("li",{staticClass:"player-control",class:e.isRandom?"active":"",attrs:{id:"random"},on:{click:function(t){e.isRandom=!e.isRandom}}},[s("i",{staticClass:"fa fa-random transform -rotate-90"})]),s("li",{staticClass:"player-control",class:e.isLoop?"active":"",attrs:{id:"loop"},on:{click:function(t){e.isLoop=!e.isLoop}}},[s("i",{staticClass:"fa fa-repeat transform -rotate-90"})]),s("li",{staticClass:"player-control",class:e.state===e.State.Stop?"disabled":"",attrs:{id:"stop"},on:{click:e.control}},[s("i",{staticClass:"fa fa-stop"})]),s("li",{staticClass:"player-control",class:e.showList?"":"disabled",attrs:{id:"prev"},on:{click:e.control}},[s("i",{staticClass:"fa fa-fast-backward"})]),s("li",{staticClass:"player-control",attrs:{id:"play"},on:{click:e.control}},[s("i",{staticClass:"fa",class:e.state===e.State.Play?"fa-pause":"fa-play ml-1"})]),s("li",{staticClass:"player-control",class:e.showList?"":"disabled",attrs:{id:"next"},on:{click:e.control}},[s("i",{staticClass:"fa fa-fast-forward"})]),s("li",{staticClass:"player-control",attrs:{id:"mute"},on:{click:e.control}},[s("i",{ref:"VolumeIcon",staticClass:"fa fa-volume-up"})]),s("li",{staticClass:"player-control",attrs:{id:"volume"},on:{input:e.control}},[s("input",{ref:"VolumeBar",attrs:{type:"range",min:"0",max:"100",step:"1",value:"100"}})])])])])],1),e.showWatchAd?s("watch-ad",{attrs:{target:"window-"+e.id},on:{close:function(t){e.showWatchAd=!1}}}):e._e(),e.showOpenDialog?s("dialog-open",{attrs:{dialogIcon:e.id,dialogName:"open",filter:e.filter},on:{cancel:function(t){e.showOpenDialog=!1},done:e.load}}):e._e()],1)},i=[],r=a("0e9a"),o=a("0f35"),n=a("962a"),l=a("3af2"),c=a("b94d"),u=a("ffab"),d=a("1a7c"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view-details",t._l(t.rows,(function(e,s){return a("tr",{key:s,class:{active:t.index===s},on:{click:function(e){return t.$emit("play",s)}}},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.duration))]),a("td",[t._v(t._s(e.size))]),a("td",[t._v(t._s(e.mtime))]),a("td",[t._v(t._s(e.ext))])])})),0)},p=[],m=a("43bc"),f=a("4cca"),y=a("cc1d"),g=a.n(y);const w={month:"long",day:"numeric",year:"numeric"};function b(t){return new Date(t).toLocaleDateString("en-US",w)}function v(t){if(!t)return null;const e=Math.floor(t);let a=Math.floor(e/3600),s=Math.floor((e-3600*a)/60),i=e-3600*a-60*s;return a<10&&(a="0"+a),s<10&&(s="0"+s),i<10&&(i="0"+i),`${0===Number(a)?"":a+":"}${s}:${i}`}function $(t,e){const a=g.a.lookup(e);if(!/audio|video/.test(a))return Promise.resolve(null);const s=document.createElement("video");return new Promise(e=>{s.setAttribute("src",t),s.onloadedmetadata=()=>{const t=s.duration;s.remove(),e(t===1/0?null:t)}})}var _={components:{ViewDetails:m["a"]},props:{files:Array,index:Number},data(){return{rows:[]}},watch:{files:{immediate:!0,async handler(t){this.rows=await Promise.all(t.map(async t=>{const{name:e,ext:a}=Object(r["r"])(t.name),s=await $(t.src,a);return{name:e,ext:a,size:Object(f["h"])(t.size),mtime:b(t.mtime),duration:v(s)}}))}}}},P=_,k=a("2877"),C=Object(k["a"])(P,h,p,!1,null,null,null),O=C.exports,j=a("6210"),x=a("e273"),S=a("01b4"),L=a("d98f"),A=a("10dc"),D=a("f106"),T=a("de73"),W=a("2f62");const N={Stop:0,Play:1,Pause:2};function R(t,e){const a=Object(o["q"])(e);return a===t?R(t,e):a}var B={components:{GoogleAds:u["a"],Controls:l["a"],TitleBar:j["a"],ToolBar:x["a"],AddressBar:n["a"],Navigation:d["a"],PlayList:O,Window:A["a"],WatchAd:L["a"],DialogOpen:c["a"]},data(){return{id:"player",toolbar:[{label:this.$t("organize"),items:[{label:this.$t("manage-libraries"),items:[{label:this.$t("music"),onClick:this.open("music")},{label:this.$tc("video",2),onClick:this.open("videos")},{label:this.$t("pictures"),onClick:this.open("pictures")}]},{label:this.$t("options"),disabled:!0}]},{label:"Stream",disabled:!0}],library:this.$t("music"),accept:"",showList:!1,filter:[],list:[],current:-1,duration:null,currentTime:-1,player:null,playPromise:null,isLoading:!1,isPlaying:!1,isRandom:!1,isLoop:!1,state:N.Stop,State:N,showWatchAd:!1,showOpenDialog:!1}},watch:{programData:{immediate:!0,async handler(t){t&&Object(o["i"])(t,"player")&&(await this.load(t),this.$store.commit(S["a"].ProgramData,null))}},state(t){if(!this.player)return;const e=this.player===this.$refs.pictures,a=this.player!==this.$refs.music;t===N.Stop&&(e||(this.playPromise.then(()=>this.player.pause()),this.player.currentTime=0),a&&(this.isPlaying=!1,this.player.style.display="")),t!==N.Pause||e||this.playPromise.then(()=>this.player.pause()),t===N.Play&&this.current>=0&&(e||(this.player.src||(this.player.src=this.list[this.current].src),this.playPromise=this.player.play()),a&&(this.isPlaying=!0,this.player.style.display="block"))},current(t){t<0||(this.player.src=this.list[t].src,this.state=N.Play,this.player!==this.$refs.pictures&&(this.playPromise=this.player.play()))}},computed:{...Object(W["d"])(["programData"]),progressStyle(){const t=this.currentTime/this.duration*100,e=[`#0365c8 ${t-1}%`,`transparent ${t}%`];return{background:`linear-gradient(to right, ${e.join()})`}}},mounted(){this.showWatchAd=!this.programData},methods:{open(t){return()=>{this.filter=T["a"][t],this.library=this.$t(t),this.showOpenDialog=!0}},async load(t){this.isLoading=!0,this.showOpenDialog=!1;const e=await D["a"].stat(t),a=await D["a"].read(t),s={...e,src:a,name:Object(r["c"])(e.uri)},{ext:i}=Object(r["r"])(t);let o=null;o="webm"===i?await Object(r["p"])(a)?"videos":"music":Object.keys(T["a"]).find(t=>T["a"][t].includes(i)),this.player=this.$refs[o],this.player.removeAttribute("src"),this.list=[s],this.current=0,this.isLoading=!1,this.showList=!0},play(t){this.current=t,this.state=N.Play},control(t){if(!this.player)return;const{value:e}=t.target,{VolumeIcon:a,VolumeBar:s}=this.$refs,{Play:i,Pause:r,Stop:o}=N;switch(t.target.closest("li").id){case"play":this.state=this.state===i?r:i;break;case"stop":this.state=o;break;case"next":this.isRandom?this.current=R(this.current,this.list.length):this.current=this.current===this.list.length-1?0:this.current+1;break;case"prev":this.isRandom?this.current=R(this.current,this.list.length):this.current=0===this.current?this.list.length-1:this.current-1;break;case"mute":this.player.muted=!this.player.muted,a.classList.replace(a.classList[1],this.player.muted?"fa-volume-off":"fa-volume-up");break;default:s.style.background=`linear-gradient(to right, #0365c8 ${e}%, transparent ${e}%)`,a.className=e>50?"fa fa-volume-up":e<1?"fa fa-volume-off":"fa fa-volume-down",this.player.muted=!1,this.player.volume=e/100}},progress(t){this.player&&(this.player.currentTime=t.target.value)}}},I=B,z=(a("ae87"),Object(k["a"])(I,s,i,!1,null,"7994e541",null));e["default"]=z.exports},6118:function(t,e,a){},"958f":function(t,e,a){"use strict";a("edf4")},ae87:function(t,e,a){"use strict";a("6118")},b94d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("computer",{attrs:{dialog:"",dialogIcon:t.dialogIcon,dialogName:t.dialogName,filter:t.filters[t.option],hoistedPath:t.dirPath,parent:t.parent},on:{close:t.cancel,change:t.setPath},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticClass:"form-control"},[a("label",[t._v(t._s(t.$t("file-name"))+":")]),a("winui-textbox"),a("winui-dropdown",{model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},t._l(t.options,(function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(e)+" ")])})),0)],1),a("div",{staticClass:"buttons"},[a("winui-button",{staticClass:"default",on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[t._v(" "+t._s(t.$t("open"))+" ")]),a("winui-button",{on:{click:function(e){return e.stopPropagation(),t.cancel(e)}}},[t._v(" "+t._s(t.$t("cancel"))+" ")])],1)]},proxy:!0}])})},i=[],r=a("13a7"),o=a("0e9a"),n={components:{Computer:r["default"]},props:{dialogIcon:String,dialogName:String,parent:String,filter:{type:Array,default:()=>[]}},data(){const t=[[]];return this.filter.length&&t.unshift(this.filter),{option:0,path:null,dirPath:null,filters:t}},mounted(){this.$root.$on("openPath",t=>this.$emit("done",t))},computed:{options(){const t=[this.$t("all-files")+" (*.*)"];if(this.filter.length){const e=this.filter.map(t=>"*."+t).join();t.unshift(`${this.$t("custom-files")} (${e})`)}return t}},methods:{setPath(t){this.path=t},open(){Object(o["r"])(this.path).ext?this.$emit("done",this.path):this.dirPath=this.path},cancel(){this.$emit("cancel")}}},l=n,c=(a("958f"),a("2877")),u=Object(c["a"])(l,s,i,!1,null,"72fc9708",null);e["a"]=u.exports},d98f:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("core-message",{attrs:{noPreTag:"","data-test-popup":"watch-ad"},on:{close:t.cancel},scopedSlots:t._u([{key:"footer",fn:function(){return[a("winui-button",{staticClass:"default",attrs:{"data-test-action":"remove-ads"},on:{click:t.showPricing}},[t._v(" "+t._s(t.$t("remove-ads"))+" ")]),a("winui-button",{attrs:{"data-test-action":"watch-ads"},on:{click:t.watchAd}},[t._v(" "+t._s(t.$t("watch-ad"))+" ")]),a("winui-button",{attrs:{"data-test-action":"cancel"},on:{click:t.cancel}},[t._v(" "+t._s(t.$t("cancel"))+" ")])]},proxy:!0}])},[a("div",{staticClass:"title-1 mb-6"},[t._v(" "+t._s(t.$t("confirm-watch-ad"))+" ")])])},i=[],r=a("e302"),o=a("3f55"),n=a("6792"),l=a("01b4"),c=a("f708"),u=a("2f62"),d={components:{CoreMessage:o["a"]},props:{target:String,isRewarded:Boolean},computed:Object(u["d"])(["showAds"]),watch:{showAds:{immediate:!0,handler(){this.showAds&&Object(r["e"])()&&!Object(c["d"])()||this.close()}}},methods:{watchAd(){this.isRewarded?Object(r["k"])():Object(r["j"])(),this.close()},showPricing(){this.$root.$emit(l["a"].Pricing,!0)},cancel(){const{target:t}=this;t&&t.startsWith("window")&&this.$root.$emit(n["c"].CloseWindow,t.split("-")[1]),this.$emit("cancel")},close(){this.$emit("close")}}},h=d,p=a("2877"),m=Object(p["a"])(h,s,i,!1,null,"448a67cf",null);e["a"]=m.exports},de73:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));const s=["webm","wav","ogg","mp3","wma"],i=["webm","ogg","mp4"],r=["bmp","gif","svg","png","jpg","jpeg","webp","ico","apng"],o={music:s,videos:i,pictures:r,audio:s,video:i,image:r}},edf4:function(t,e,a){}}]);